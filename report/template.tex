\documentclass[conference]{IEEEtran}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\usepackage{amssymb}
\usepackage[cmex10]{amsmath}
\interdisplaylinepenalty=2500
\usepackage{array}
\usepackage{hyperref}
\usepackage{listings}
\begin{document}

\title{\large $title$}

\author{
  \IEEEauthorblockN{$authors$}
  \IEEEauthorblockA{$university$\\$dept1$\\$dept2$\\$dept3$}}
\maketitle

\begin{abstract}
  \boldmath
  $abstract$
\end{abstract}

\begin{keywords}
$keywords$
\end{keywords}

\IEEEpeerreviewmaketitle

$body$

% that's all folks
\end{document}
